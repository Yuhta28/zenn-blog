---
title: "App Runnerで気になったところ"
emoji: "🐕"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS", "apprunner"]
published: false
---

:::message alert
この記事は結論がありません。調べてみましたが原因がわからなかったので詳しい人いましたらアドバイスいただけますと幸いです。
:::

# 背景
会社でDatadogによるモニタリング基盤の構築を実装しています。最初はメディアサーバーやDBを監視するためにエージェント起動用のEC2を用意してそこからサーバーへの外形監視やDB監視を構築していました。
ただ導入しているエージェントを動かすためだけにサーバーを用意するのものもったいなかったのでコンテナにDatadogエージェントを導入し、そこから起動するようにしました。
せっかくなので昨年リリースされたApp Runner[^1]でDatadogエージェントコンテナを構築してみました。
[^1]: https://aws.amazon.com/jp/apprunner/

![](/images/app-runner-proxy/image7.png)
*アーキテクチャ図*

App RunnerならECR[^2]にコンテナイメージをセットするだけで面倒なネットワーク周りの設定も簡略化でき、監視メディアの増減の度にリポジトリにプッシュするだけでコンテナへの自動デプロイも担ってくれるため、運用が楽になると思ったのが採用理由になります。
[^2]: https://aws.amazon.com/jp/ecr/