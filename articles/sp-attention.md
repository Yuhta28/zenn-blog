---
title: "AWSã®Savings Plansã«æ°—ã‚’ä»˜ã‘ã‚ˆã†"
emoji: "ğŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AWS","EC2","ã‚³ã‚¹ãƒˆæœ€é©åŒ–"]
published: true
---
# æ¦‚è¦
ã“ã®è¨˜äº‹ã¯å®Ÿè³ªçš„ã«[RDSã®ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ°—ã‚’ä»˜ã‘ã‚ˆã†](https://zenn.dev/yuta28/articles/rds-attention)ã®ç¶šãã‚‚ã®ã€ã¨ã„ã†ã‹åŸ·ç­†å¾Œã«ç™ºè¦šã—ãŸã‚„ã‚‰ã‹ã—ã‚’è¨˜è¿°ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚
Savings Plans(SP)ã®è©³ã—ã„èª¬æ˜ã¯å…ˆã®è¨˜äº‹ã‚’ã”è¦§ã„ãŸã ãã€ã“ã“ã§ã¯SPã§ç§ãŒã‚„ã£ã¦ã—ã¾ã£ãŸãƒŸã‚¹ã«ã¤ã„ã¦ç´¹ä»‹ã„ãŸã—ã¾ã™ã€‚

# äº‹è±¡
å‰ã®è¨˜äº‹ã§ã‚‚ç´¹ä»‹ã—ãŸã¨ãŠã‚Š6/25ã«ä¼šç¤¾ã§é‹ç”¨ã—ã¦ã„ã‚‹RIã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¾ã™ã®ã§ã€æ–°ã—ãæ›´æ–°ã™ã‚‹å¿…è¦ãŒã§ã¦ãã¾ã—ãŸã€‚
å¼Šç¤¾ã§ã¯ä»Šå¹´ã‹ã‚‰EC2ã¯RIã‹ã‚‰SPã«åˆ‡ã‚Šæ›¿ãˆã‚‹é‹ç”¨ã«ã—ã¦ãã¾ã—ãŸã®ã§ã€é †æ¬¡æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚ŒãŸEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒªã‚½ãƒ¼ã‚¹åˆ†æ–°ã—ãSPã§ç”³è«‹ã—ã¦ã„ã¾ã™ã€‚
å‰å›ã®è¨˜äº‹ã‚‚æ›¸ã„ãŸã¨ãŠã‚ŠSPã¯äº‹å‰äºˆç´„ã‚‚ã§ãã¾ã™ã®ã§ã€6æœˆä¸­æ—¬é ƒã«7/1ã«é©ç”¨ã§ãã‚‹ã‚ˆã†ã«è³¼å…¥ã—ã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/8164da74ee389aaa8bd9e4ec.png)

ãã—ã¦ï¼—æœˆã«ãªã£ãŸã®ã§åˆ©ç”¨æ˜ç´°ã‚’ç¢ºèªã—ãŸã®ã§ã™ãŒã€ï¼–æœˆã«åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/67af7b07bb814aea2371e6b6.png)

# åŸå› 
åŸå› ã§ã™ãŒAWSã¯è«‹æ±‚ã®æ™‚é–“ã‚’å”å®šä¸–ç•Œæ™‚åˆ»(UTC)ã‚’åŸºæº–ã«è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚[^1]
> Q. AWSã®è«‹æ±‚ã®æ™‚é–“ã¯JST/æ—¥æœ¬æ¨™æº–æ™‚ã§ã™ã‹ï¼Ÿ
> ã„ã„ãˆã€å”å®šä¸–ç•Œæ™‚ï¼ˆUTCï¼‰ã‚’åŸºæº–ã«è«‹æ±‚é‡‘é¡ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚
> æ—¥æœ¬æ¨™æº–ï¼ˆJSTï¼‰ã¨å”å®šä¸–ç•Œæ™‚ï¼ˆUTCï¼‰ã¨ã®æ™‚å·®ã¯9æ™‚é–“ã¨ãªã‚Šã¾ã™ã€‚
> 4æœˆ1æ—¥8æ™‚å°ï¼ˆJSTï¼‰ã®ã”åˆ©ç”¨æ–™é‡‘ã¯3æœˆåˆ†ã®æ–™é‡‘ã¨ã—ã¦è¨ˆä¸Šã•ã‚Œã€
> 4æœˆ1æ—¥9æ™‚ï¼ˆJSTï¼‰ã®ã”åˆ©ç”¨æ–™é‡‘ã‹ã‚‰4æœˆåˆ†ã®æ–™é‡‘ã¨ã—ã¦è¨ˆä¸Šã•ã‚Œã¾ã™ã€‚

[^1]: https://aws.amazon.com/jp/aws-jp-faq/

ç§ã¯ã€æ—¥æœ¬æ™‚é–“ã®7/1ã®0æ™‚ã‹ã‚‰ãƒ—ãƒ©ãƒ³ã‚’é©ç”¨ã•ã›ãŸã‹ã£ãŸã®ã§UTCã¯6/30 15:00ã‹ã‚‰é©ç”¨é–‹å§‹ã™ã‚‹ã‚ˆã†ã«è³¼å…¥ã—ã¾ã—ãŸã€‚

ãã®ãŸã‚AWSã¯6æœˆã«åˆ©ç”¨ã—ãŸã¨åˆ¤æ–­ã—ã¦SPã®åˆ©ç”¨æ˜ç´°ãŒ6æœˆåˆ©ç”¨ã¨ãªã£ãŸã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚

# æ‰€æ„Ÿ
æ—¥æœ¬ã§ç”Ÿæ´»ã—ã¦ã„ã‚‹ã¨å½“ãŸã‚Šå‰ã®ã‚ˆã†ã«JSTåŸºæº–ã§æ™‚åˆ»ã‚’æ±ºã‚ã¾ã™ãŒæ—¥ä»˜ã®å¤‰ã‚ã‚Šç›®ã¯ç‰¹ã«æ°—ã‚’ä»˜ã‘ãŸã»ã†ãŒè‰¯ã•ãã†ã§ã™ã€‚

# è¿½è¨˜(2021/8/28)
å‹äººã‹ã‚‰æ•™ãˆã¦ã‚‚ã‚‰ã„ã¾ã—ãŸãŒã€EC2ã®RIã¯æ—¥ä»˜æŒ‡å®šã¯ã§ãã¦ã‚‚æ™‚åˆ»æŒ‡å®šã¯ã§ããªã„ã¨ã®ã“ã¨ã§ã—ãŸã€‚æ—¥ä»˜ã‚’æŒ‡å®šã—ãŸå ´åˆã€GMTã®0:00ã¤ã¾ã‚Šæ—¥æœ¬æ™‚é–“ã®æœ9æ™‚ã«RIãŒé©ç”¨ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

RDSã®RIã¨EC2ã®RIã€SPã®ä¸‰è€…ã¯ãã‚Œãã‚Œã§ã§ãã‚‹éƒ¨åˆ†ã€ã§ããªã„éƒ¨åˆ†ãŒå¾®å¦™ã«ç•°ãªã£ã¦ã„ã¾ã—ãŸã®ã§å›³ã§æ•´ç†ã—ã¾ã™ã€‚

#### æ¯”è¼ƒè¡¨

| | RDS RI | EC2 RI | EC2 SP |
| --| -- |  -- | --|
| æ—¥ä»˜æŒ‡å®š | Ã— | â—‹ | â—‹ |
| æ™‚åˆ»æŒ‡å®š | Ã— | Ã— | â—‹|

ã“ã‚Œã¯æ„å¤–ã¨è¦‹è½ã¨ã—ãŒã¡ãªç½ ã ã¨æ€ã„ã¾ã™ã®ã§ã€ä»Šå¾ŒRI/SPã‚’ç”³è«‹ã™ã‚‹ã¨ãã¯æ°—ã‚’ä»˜ã‘ãŸã»ã†ãŒã‚ˆã•ãã†ã§ã™ã€‚

## è¿½è¨˜ã®è¿½è¨˜
EC2ã®RIã§ã™ãŒã€AWS CLIã‹ã‚‰ã§ã—ãŸã‚‰æ™‚åˆ»æŒ‡å®šãŒã§ãã‚‹ã¿ãŸã„ã§ã™ã€‚

https://twitter.com/ohsawa0515/status/1431467827249090560?conversation=none

AWS CLIã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¾ã™ã¨ã€`purchase-reserved-instances-offering`ã‚³ãƒãƒ³ãƒ‰ã®ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ãˆã°æ™‚åˆ»æŒ‡å®šãŒã§ãã‚‹ã¿ãŸã„ã§ã™ã€‚

--purchase-time (timestamp)
> The time at which to purchase the Reserved Instance, in UTC format (for example, YYYY -MM -DD T*HH* :MM :SS Z).

```
purchase-reserved-instances-offering
--instance-count <value> \
--reserved-instances-offering-id <value> \
--purchase-time <value>
```

AWSã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã¯ã§ããªã„ã“ã¨ã‚‚CLIãªã‚‰ã§ãã‚‹ã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚
ã¡ãªã¿ã«RDSã®RIã‚‚CLIãªã‚‰æ—¥ä»˜æŒ‡å®šã§ãã‚‹ã‹ãªã¨æ€ã£ã¦èª¿ã¹ã¾ã—ãŸãŒã€æ®‹å¿µãªãŒã‚‰CLIã§ã‚‚RDSã®RIã¯æ—¥ä»˜æŒ‡å®šã§ããªã„ã¿ãŸã„ã§ã™ã€‚

ã„ã¤ã‹RDSã®RIã‚‚æ—¥æ™‚ã®æŒ‡å®šãŒã§ãã‚‹ã“ã¨ã‚’ç¥ˆã£ã¦ã„ã¾ã™ã€‚
# å‚è€ƒæ–‡çŒ®
https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/ec2-scheduled-instances.html
https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ec2/purchase-reserved-instances-offering.html
https://awscli.amazonaws.com/v2/documentation/api/latest/reference/rds/purchase-reserved-db-instances-offering.html