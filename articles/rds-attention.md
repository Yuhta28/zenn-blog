---
title: "RDSのリザーブドインスタンスに気をつけよう"
emoji: "🐁"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS","RDS"]
published: false
---

# 背景
会社で動かしているAWSインスタンスのRIが6/25に期限が切れるとお知らせがありましたので、5月ごろからEC2インスタンスやRDSの棚卸し作業を行っていました。

その時にRDSのリザーブドインスタンス(RI)に関する注意点、もとい私がやらかした失敗談です。
EC2のRIとは微妙に仕様が異なっていて罠にハマりましたので戒めの意味を込めてここに記します。

# EC2リザーブドインスタンスとSavings Plansについて
表題から主旨が外れますが、せっかくなのでEC2インスタンスのコスト削減について説明します。

昨年会社ではEC2インスタンスはすべてRIを使って年間のランニングコスト削減に努めていました。
ところが弊社では、EC2インスタンスタイプを頻繁に変えて、作っては壊してを繰り返しておりインスタンスタイプが固定されるリザーブドインスタンスではあまりコスト削減効果が見込めませんでした。
https://aws.amazon.com/jp/ec2/pricing/reserved-instances/
そこで今年からより柔軟に対象インスタンスを変えられるSavings Plans(SP)に変更することに決めました。
https://aws.amazon.com/jp/savingsplans/
RIは指定されたリージョンとインスタンスタイプにしか割引が適用されませんが、SPは時間あたりの使用量に応じて事前に先払いする仕組みとなっています。
例えば一時間あたり$0.0199を1年間分全額先払い(≒$175.2)すれば、オンデマンドですと$0.0272かかる東京リージョンのt3.smallインスタンス1台を1年間利用できるという計算です。
|    |     |   |    |    |    |
|----|----|----|----|----|----|
|インスタンス名|Savings Plans の料金|オンデマンドと比較した費用節減|オンデマンド料金|リージョン|オペレーティングシステム|
|t3.small|	0.0199 USD	|27%	|0.0272 USD	|Asia Pacific (Tokyo)	|Linux|

ここでRIと違う点はコンピューティングリソースに対して事前に先払いするという点です。
RIでは東京リージョンのt3.smallインスタンス1台と指定するとその割引が東京リージョンのt3.smallインスタンス1台にしか有効となりません。
SPは