---
title: "リバースプロキシを使って、別Webサイトのコンテンツを表示させてみた"
emoji: "🐀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["nginx","WordPress","AWS"]
published: false
---
# 概要
最近仕事でリバースプロキシを扱いましたが、今まで実際に触ったことがなく本で読んだ知識レベルでしかなかったせいで、GW前最後の仕事でかなり手こずりました。
なのでもう一度リバースプロキシの知識を見直すために実際にプロキシサーバーを立てて理解を深めてみようと思います。

# プロキシの基本
基本から立ち返るためにリバースプロキシの前に通常のプロキシ(フォーワードプロキシ)の役割についてもう一度調べてみます。
## プロキシについて
プロキシとは日本語で**代理**を意味し、インターネット接続ができない社内ネットワークにあるPCの代理として、インターネット接続を担います。
プロキシの役割を持つサーバーのことをプロキシサーバーと呼びます。
https://www.infraexpert.com/study/security23.html

リンク先の図に記載されているとおり、PCからはプロキシサーバーはWebサイトを表示させるサーバーとしての役割を持ち、Webサーバーからはコンテンツを返すためのクライアントの役割を持ちます。
PCからはWebサーバーの存在を直接感知できないことからさまざまなメリットがあります。

#### プロキシのメリット
- キャッシュによるレスポンス向上
- ユーザー認証
- ユーザー管理
- 有害サイトのフィルタリング
- 匿名性の確保

リンク先から紹介しましたが、特に大きいのはキャッシュ機能でしょうか。
毎回PCからのリクエストに対してWebサーバーがレスポンスを返すと負荷がかかり多人数に同時に行なうと処理が遅くなり、ユーザーの利便性も損なわれてしまいます。
一度プロキシサーバー経由でアクセスし、次回以降はプロキシサーバー内のキャッシュを活用することでWeb通信の高速化を実現させます。
## リバースプロキシについて
それではリバースプロキシとはどのような役割を持つのでしょうか。
リバースプロキシはインターネットから社内サーバーへアクセスされる通信を中継する仕組みです。
社内からインターネットへ接続することの反対で、インターネットから内部ネットワーク接続するように中継することからリバースプロキシと呼びます。
リバースプロキシも通常のプロキシと同じく自身をクライアントとしてWebサーバーへリクエストを転送し、Webサーバーからをレスポンスを受け取ったら今度はサーバーとしてレスポンス結果をPCに返します。
https://www.atmarkit.co.jp/ait/articles/1608/25/news034.html
リバースプロキシのメリットも通常のプロキシと重複している部分もありますが、以下のメリットがあります。
#### リバースプロキシのメリット
- 負荷分散によるスループット向上
- キャッシュによるレスポンス向上
- 異なるアプリやフレームワーク、プラットフォームの統合
- セキュリティ強化
- SSLの集中管理

各項目の詳細については上記のリンク先を見ていただきたいですが、通常のプロキシと大きく違うのは負荷分散によるスループット向上でしょうか。
PCからは１台のサーバーに見えても、実はリバースプロキシを使うことで複数の同じ機能を持つWebサーバーにリクエストを分散させることでアクセス負荷に耐えられることができるロードバランサーのような役割を持つことができます。



# 参考文献
https://eset-info.canon-its.jp/malware_info/special/detail/201021.html

